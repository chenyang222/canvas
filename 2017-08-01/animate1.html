<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		
		<style type="text/css">
			#myCanvas{
				border: 1px solid #000;
				background: #000000;
			}
			html,body{
				padding: 0;
				margin: 0;
				background: #FFFFFF;
			}
		</style>
	</head>
	<body>
		<!--
	
	
		-->
		
		<canvas id="myCanvas" width="500" height="500"></canvas>
		<script type="text/javascript">
			
			var myCanvas = document.getElementById('myCanvas');
			
			var ctx = myCanvas.getContext('2d');

			draw();	

			var ad = 135;
			var ad2 = 135;
			
			var timer;
			var timer2;
			var timer3;
			var timer4;
			
			function animate1(){
					
				ad -= 5;
				if( ad <= 90){
					clearInterval(timer);
					setTimeout(function(){
						timer2 = setInterval(animate2,20);
					},500)
				}
									
			}
			
			function animate2(){
					
				ad -= 5;
				if( ad <= -45){
					ad = 135;
					clearInterval(timer2);
					setTimeout(function(){					
						timer = setInterval(animate1,20)
					},500)				
				}
									
			}			

			function animate3(){
					
				ad2 += 5;
				if( ad2 >= 205){
					clearInterval(timer3);
					setTimeout(function(){
						timer4 = setInterval(animate4,20);
					},500)
				}
									
			}
			
			function animate4(){
					
				ad2 += 5;
				if( ad2 >= 315){
					ad2 = 135;
					clearInterval(timer4);
					setTimeout(function(){					
						timer3 = setInterval(animate3,20)
					},500)				
				}
									
			}
			
			timer = setInterval(animate1,20);
			timer3 = setInterval(animate3,20);
			
			function draw(){
				
				ctx.clearRect(0,0,500,500);
				
				ctx.strokeStyle = 'white';
				ctx.beginPath();
				
				//left
				
				ctx.lineWidth = 2;
				
				for(var i=0;i<4;i++){
					
					var ld = test(125+i*35,180-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);				
				}
				
				for(var i=0;i<4;i++){
					
					var ld = test(125+i*35,215-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}	
				
				for(var i=0;i<4;i++){
					
					var ld = test(125+i*35,250-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}

				for(var i=0;i<4;i++){
					
					var ld = test(125+i*35,285-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				
				//right
				
				for(var i=0;i<4;i++){
					
					var ld = test(299+i*35,260-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}				
				
				for(var i=0;i<4;i++){
					
					var ld = test(299+i*35,295-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				for(var i=0;i<4;i++){
					
					var ld = test(299+i*35,330-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				for(var i=0;i<4;i++){
					
					var ld = test(299+i*35,365-i*35,5,ad);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				ctx.stroke();			
				ctx.closePath();
				
				ctx.beginPath();				
				ctx.lineWidth = 3;
				//top
				
				for(var i=0;i<4;i++){
					
					var ld = test(147+i*35,170-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}				
				
				for(var i=0;i<4;i++){
					
					var ld = test(190+i*35,190-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				for(var i=0;i<4;i++){
					
					var ld = test(233+i*35,210-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				for(var i=0;i<4;i++){
					
					var ld = test(276+i*35,230-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				//bottom
				
				for(var i=0;i<4;i++){
					
					var ld = test(147+i*35,315-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}				
				
				for(var i=0;i<4;i++){
					
					var ld = test(190+i*35,335-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				for(var i=0;i<4;i++){
					
					var ld = test(233+i*35,355-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}
				
				for(var i=0;i<4;i++){
					
					var ld = test(276+i*35,375-i*35,5,ad2);
					ctx.moveTo(ld.x1,ld.y1);
					ctx.lineTo(ld.x2,ld.y2);						
					
				}		

				ctx.stroke();			
				
				ctx.closePath();
				
				window.requestAnimationFrame(draw,myCanvas);
				
			}
		
			
			function test(x,y,r,radius){
				
				var rd = {}
	
				if( radius == 90 || radius == 270){
					
					rd.x1 = x;
					rd.y1 = y-4*r;
					rd.x2 = x;
					rd.y2 = y+4*r;						
					
				}else{

					var rad = radius*Math.PI/180;
					
					var k = Math.tan(rad);
	
					var b = y-k*x;
					
					var x1 = x + r* Math.sqrt(r*r/(k*k+1));
					var y1 = k*x1 + b; 
					
					var x2 = x - r* Math.sqrt(r*r/(k*k+1));
					var y2 = k*x2 + b;
					
					rd.x1 = x1;
					rd.y1 = y1;
					rd.x2 = x2;
					rd.y2 = y2;						
				}		
				
				return rd								
			}
			
			
		</script>
	</body>
</html>
