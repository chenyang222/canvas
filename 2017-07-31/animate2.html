<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		
		<style type="text/css">
			#myCanvas{
				border: 1px solid #000;
				background: #000000;
			}
			html,body{
				padding: 0;
				margin: 0;
				background: #FFFFFF;
			}
		</style>
	</head>
	<body>
		<!--
	
	
		-->
		
		<canvas id="myCanvas" width="400" height="400"></canvas>
		<script src="../mycanvasfn/ranchy_canvasfn.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			
			var myCanvas = document.getElementById('myCanvas');
			
			var ctx = myCanvas.getContext('2d');

			draw();	

			var i = 0;
			
//			var timer = setInterval(function(){
//				
//				i+=90;
//				
//			},3000)			
			
			function draw(){
				
				ctx.clearRect(0,0,400,400);
				
				ctx.strokeStyle = 'white';
				
				ctx.beginPath();
				
				var ld = test(10,10,4,45);
				
				var dis = ranchy.distance(ld.x1,ld.y1,ld.x2,ld.y2)
				console.log(dis)
				
				ctx.moveTo(ld.x1,ld.y1);
				
				ctx.lineTo(ld.x2,ld.y2);

				ctx.stroke();			
				
				ctx.closePath();
				
//				window.requestAnimationFrame(draw,myCanvas);

				
			}
		
			
			function test(x,y,r,radius){
				
				var rd = {}
				
				var rad = radius*Math.PI/180;
				
				var k = Math.tan(rad);

				var b = y-k*x;

				console.log(k,b)

				var a = k*k+1;
				
				var b2 = -2*x+2*k*b-2*y*k;
				
				var c = x*x + y*y + b*b - 2*y*b - r*r;
			
				var x1 = (-b2 + Math.sqrt(b2*b2-4*a*c))/2*a;
				var y1 = k*x1 + b; 
				
				var x2 = (-b2 - Math.sqrt(b2*b2-4*a*c))/2*a;
				var y2 = k*x2 + b;
				
				rd.x1 = x1;
				rd.y1 = y1;
				rd.x2 = x2;
				rd.y2 = y2;			
				
				return rd								
			}
			
			
		</script>
	</body>
</html>
